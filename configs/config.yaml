# wg-singbox-gateway configuration
# Keenetic router connects via WireGuard, sing-box routes traffic

wireguard:
  private_key: ${WG_PRIVATE_KEY}
  public_key: ${WG_PUBLIC_KEY}
  listen_port: 51820
  address: 10.0.0.1/24
  mtu: 1280

  # PostUp/PostDown для настройки маршрутизации трафика через sing-box
  # Весь трафик с WireGuard интерфейса (wg0) будет перенаправляться на TUN интерфейс sing-box
  post_up: |
    iptables -t nat -A PREROUTING -i wg0 -j REDIRECT --to-ports 2080

  post_down: |
    iptables -t nat -D PREROUTING -i wg0 -j REDIRECT --to-ports 2080

singbox:
  config_path: /etc/singbox/config.json
  log_level: info
